<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" type="text/css" href="style/column.css" />
        <link rel="stylesheet" type="text/css" href="style/header.css" />
        <link rel="stylesheet" type="text/css" href="style/param.css" />
        <script src="./src/calc.js"></script>
        <title>Calc</title>
    </head>
    <body>
        <div class="header">Staple Simulation</div>
        <div class="topnav">
            <a href="./index.html" target="_self">Home</a>
            <a href="./apr.html" target="_self">Apr</a>
        </div>

        <!-- Vtp Params -->
        <div class="column vtp">
            <div class="topic">Vtp Param</div>
            <form action="" oninput="CalcHome()">
                <table>
                    <tr>
                        <td>n</td>
                        <td>=</td>
                        <td class="params" id="n" contenteditable>30</td>
                    </tr>
                    <tr>
                        <td>rrs</td>
                        <td>=</td>
                        <td class="params" id="rrs" contenteditable>0.1</td>
                    </tr>
                    <tr>
                        <td>p</td>
                        <td>=</td>
                        <td class="params" id="p" contenteditable>0.12</td>
                    </tr>
                    <td>=====</td>
                    <tr>
                        <td>ralr</td>
                        <td>=</td>
                        <td id="ralr">1</td>
                    </tr>
                    <tr>
                        <td>Po</td>
                        <td>=</td>
                        <td id="po">1</td>
                    </tr>
                    <tr>
                        <td>Pa</td>
                        <td>=</td>
                        <td id="pa">1</td>
                    </tr>
                </table>
            </form>

            <hr>

            <div class="topic">Page Param</div>
            <form action="" oninput="CalcHome()">
                <table>
                    <tr>
                        <td>decimal(round)</td>
                        <td>=</td>
                        <td class="params" id="decimals" contenteditable>6</td>
                    </tr>
                </table>
            </form>

        </div>

        <!-- VtpToken 0 -->
        <div class="column vtpToken">
            <div class="topic">Token 0</div>
            <form action="" oninput="CalcHome()">
                <table>
                    <tr>
                        <td>asset</td>
                        <td>=</td>
                        <td class="params" id="a0" contenteditable>10000</td>
                    </tr>
                    <tr>
                        <td>allocated</td>
                        <td>=</td>
                        <td class="params" id="aed0" contenteditable>10000</td>
                    </tr>
                    <tr>
                        <td>feeCollected</td>
                        <td>=</td>
                        <td class="params" id="fc0" contenteditable>0</td>
                    </tr>
                    <tr>
                        <td>liability</td>
                        <td>=</td>
                        <td id="l0">10000</td>
                    </tr>
                    <tr>
                        <td>alr</td>
                        <td>=</td>
                        <td id="alr0">1</td>
                    </tr>
                    <tr>
                        <td>oracle price</td>
                        <td>=</td>
                        <td class="params" id="op0" contenteditable>1</td>
                    </tr>
                    <td>=====</td>
                    <tr>
                        <td>swapInFee</td>
                        <td>=</td>
                        <td class="params" id="sif0" contenteditable>0</td>
                    </tr>
                    <tr>
                        <td>swapOutFee</td>
                        <td>=</td>
                        <td class="params" id="sof0" contenteditable>0.0001</td>
                    </tr>
                     
                    <tr>
                        <td>protocolFeeRate</td>
                        <td>=</td>
                        <td class="params" id="pfr0" contenteditable>0.1</td>
                    </tr>
                    <tr>
                        <td>alrLowerBound</td>
                        <td>=</td>
                        <td class="params" id="alb0" contenteditable>0.88</td>
                    </tr>
                    <td>=====</td>
                    <tr>
                        <td>user allocation</td>
                        <td>=</td>
                        <td class="params" id="ua0" contenteditable>0</td>
                    </tr>
                    <tr>
                        <td>userShares</td>
                        <td>=</td>
                        <td class="params" id="us0" contenteditable>0</td>
                    </tr>
                    <tr>
                        <td>totalShares</td>
                        <td>=</td>
                        <td class="params" id="ts0" contenteditable>10000</td>
                    </tr>
                    <td>=====</td>
                    <tr>
                        <td>ralr0</td>
                        <td>=</td>
                        <td id="ralr0">1</td>
                    </tr>
                    <tr>
                        <td>Po0</td>
                        <td>=</td>
                        <td id="po0">1</td>
                    </tr>
                    <tr>
                        <td>Pa0</td>
                        <td>=</td>
                        <td id="pa0">1</td>
                    </tr>
                </table>
            </form>
        </div>

        <!-- VtpToken 1 -->
        <div class="column vtpToken">
            <div class="topic">Token 1</div>
            <form action="" oninput="CalcHome()">
                <table>
                    <tr>
                        <td>asset</td>
                        <td>=</td>
                        <td class="params" id="a1" contenteditable>10000</td>
                    </tr>
                    <tr>
                        <td>allocated</td>
                        <td>=</td>
                        <td class="params" id="aed1" contenteditable>10000</td>
                    </tr>
                    <tr>
                        <td>feeCollected</td>
                        <td>=</td>
                        <td class="params" id="fc1" contenteditable>0</td>
                    </tr>
                    <tr>
                        <td>liability</td>
                        <td>=</td>
                        <td id="l1">10000</td>
                    </tr>
                    <tr>
                        <td>alr</td>
                        <td>=</td>
                        <td id="alr1">1</td>
                    </tr>
                    <tr>
                        <td>oracle price</td>
                        <td>=</td>
                        <td class="params" id="op1" contenteditable>1</td>
                    </tr>
                    <td>=====</td>
                    <tr>
                        <td>swapInFee</td>
                        <td>=</td>
                        <td class="params" id="sif1" contenteditable>0</td>
                    </tr>
                    <tr>
                        <td>swapOutFee</td>
                        <td>=</td>
                        <td class="params" id="sof1" contenteditable>0.0001</td>
                    </tr>
                    
                    <tr>
                        <td>protocolFeeRate</td>
                        <td>=</td>
                        <td class="params" id="pfr1" contenteditable>0.1</td>
                    </tr>
                    <tr>
                        <td>alrLowerBound</td>
                        <td>=</td>
                        <td class="params" id="alb1" contenteditable>0.88</td>
                    </tr>
                    <td>=====</td>
                    <tr>
                        <td>user allocation</td>
                        <td>=</td>
                        <td class="params" id="ua1" contenteditable>0</td>
                    </tr>
                    <tr>
                        <td>userShares</td>
                        <td>=</td>
                        <td class="params" id="us1" contenteditable>0</td>
                    </tr>
                    <tr>
                        <td>totalShares</td>
                        <td>=</td>
                        <td class="params" id="ts1" contenteditable>10000</td>
                    </tr>
                    <td>=====</td>
                    <tr>
                        <td>ralr1</td>
                        <td>=</td>
                        <td id="ralr1">1</td>
                    </tr>
                    <tr>
                        <td>Po1</td>
                        <td>=</td>
                        <td id="po1">1</td>
                    </tr>
                    <tr>
                        <td>Pa1</td>
                        <td>=</td>
                        <td id="pa1">1</td>
                    </tr>
                </table>
            </form>
        </div>

        <!-- Swap -->
        <div class="column action">
            <div>
                <div class="topic">Swap</div>
                <form action="" oninput="CalcHome()">
                    <table>
                        <tr>
                            <td>amount</td>
                            <td>=</td>
                            <td class="params" id="sa" contenteditable>10</td>
                        </tr>
                        <tr>
                            <td>direction</td>
                            <td>=</td>
                            <td>
                                <select id="st">
                                    <option value="0">token0 => token1</option>
                                    <option value="1">token1 => token0</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>discount</td>
                            <td>=</td>
                            <td class="params" id="discount" contenteditable>0</td>
                        </tr>
                    </table>
                </form>
            </div>

            <hr></hr>

            <div>
                <div class="topic">Result</div>
                <form action="" oninput="CalcHome()">
                    <table>
                        <tr>
                            <td>feeIn</td>
                            <td>=</td>
                            <td id="sifr">-</td>
                        </tr>
                        <tr>
                            <td>feeOut</td>
                            <td>=</td>
                            <td id="sofr">-</td>
                        </tr>
                        <tr>
                            <td>realOut</td>
                            <td>=</td>
                            <td id="sro">-</td>
                        </tr>
                        <tr>
                            <td>impact</td>
                            <td>=</td>
                            <td id="spi">-</td>
                        </tr>
                        <td>=====</td>
                        <tr>
                            <td>alr0 after swap</td>
                            <td>=</td>
                            <td id="alras0">-</td>
                        </tr>
                        <tr>
                            <td>alr1 after swap</td>
                            <td>=</td>
                            <td id="alras1">-</td>
                        </tr>
                    </table>
                </form>
            </div>

            <hr></hr>

            <div>
                <div class="topic">Compare with Frontend</div>
                <form action="" oninput="CalcHome()">
                    <table>
                        <tr>
                            <td>front result</td>
                            <td>=</td>
                            <td class="params" id="srofr" contenteditable>0</td>
                        </tr>
                        <tr>
                            <td>deviation</td>
                            <td>=</td>
                            <td id="srode">-</td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>

        <!-- Allocate -->
        <div class="column action">
            <div>
                <div class="topic">Allocate</div>
                <form action="" oninput="CalcHome()">
                    <table>
                        <tr>
                            <td>amount</td>
                            <td>=</td>
                            <td class="params" id="aa" contenteditable>10</td>
                        </tr>
                        <tr>
                            <td>token</td>
                            <td>=</td>
                            <td>
                                <select id="at">
                                    <option value="0">token0</option>
                                    <option value="1">token1</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>=</td>
                            <td></td>
                        </tr>
                    </table>
                </form>
            </div>

            <hr></hr>

            <div>
                <div class="topic">Result</div>
                <form action="" oninput="CalcHome()">
                    <table>
                        <tr>
                            <td>fee</td>
                            <td>=</td>
                            <td id="af">-</td>
                        </tr>
                        <tr>
                            <td>fee rate</td>
                            <td>=</td>
                            <td id="afr">-</td>
                        </tr>
                        <td>=====</td>
                        <tr>
                            <td>alr after allocate</td>
                            <td>=</td>
                            <td id="alraa">-</td>
                        </tr>
                    </table>
                </form>
            </div>

            <hr></hr>

            <div>
                <div class="topic">Compare with Frontend</div>
                <form action="" oninput="CalcHome()">
                    <table>
                        <tr>
                            <td>front result</td>
                            <td>=</td>
                            <td class="params" id="affr" contenteditable>0</td>
                        </tr>
                        <tr>
                            <td>deviation</td>
                            <td>=</td>
                            <td id="afde">-</td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>

        <!-- Deallocate -->
        <div class="column action">
            <div>
                <div class="topic">Deallocate</div>
                <form action="" oninput="CalcHome()">
                    <table>
                        <tr>
                            <td>amount</td>
                            <td>=</td>
                            <td class="params" id="da" contenteditable>10</td>
                        </tr>
                        <tr>
                            <td>token</td>
                            <td>=</td>
                            <td>
                                <select id="dt">
                                    <option value="0">token0</option>
                                    <option value="1">token1</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>=</td>
                            <td></td>
                        </tr>
                    </table>
                </form>
            </div>

            <hr></hr>

            <div>
                <div class="topic">Result</div>
                <form action="" oninput="CalcHome()">
                    <table>
                        <tr>
                            <td>fee</td>
                            <td>=</td>
                            <td id="df">-</td>
                        </tr>
                        <tr>
                            <td>fee rate</td>
                            <td>=</td>
                            <td id="dfr">-</td>
                        </tr>
                        <td>=====</td>
                        <tr>
                            <td>alr after deallocate</td>
                            <td>=</td>
                            <td id="alrad">-</td>
                        </tr>
                    </table>
                </form>
            </div>

            <hr></hr>

            <div>
                <div class="topic">Compare with Frontend</div>
                <form action="" oninput="CalcHome()">
                    <table>
                        <tr>
                            <td>front result</td>
                            <td>=</td>
                            <td class="params" id="dffr" contenteditable>0</td>
                        </tr>
                        <tr>
                            <td>deviation</td>
                            <td>=</td>
                            <td id="dfde">-</td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>

        <div class="column error">
            <div>
                <div class="topic">Error</div>
                <form action="">
                    <table>
                        <tr>
                            <td id="error">failed</td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>

        <script>
            CalcHome();
        </script>
    </body>
</html>
